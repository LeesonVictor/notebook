# TCP三次握手四次挥手

标签： tcp 三次握手 四次挥手

---

## 为什么是三次握手

**原因**：tcp是全双工通信，需要保证双向通信可靠性。
**流程**：

- 客户端请求，服务端回复，客户端便知道对方可收到自己的消息，确定  **客户端到服务端** 链路畅通。
- 服务端请求，客户端回复，服务端便知道对方可收到自己的消息，确定  **服务端到客户端** 链路畅通。
**而服务端回复和请求放在了一个请求里，便合并成了三次**。

## 为什么是四次挥手

**流程**：

1. 客户端告诉服务端我将不发送信息了（但还可以收取信息和发送指令）。==》**客户端关闭发送**
2. 服务端告诉客户端我知道了（避免客户端未收到回复重复发）。==》**服务端关闭接收**
...(中间服务端继续发送前面没来得及处理的请求的回复给客户端，所以二三次挥手不能合并)。
3. 服务端告诉客户端我也将不发送信息了。==》**服务端关闭发送**
4. 客户端告诉服务端我知道了。==》**客户端关闭接收**

至此，服务端客户端资源释放完毕。
